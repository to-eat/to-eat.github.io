import{m as j,h as o,j as e,v as x}from"./index-C4Bhj8Yd.js";import{B as a}from"./Button-Ba6Qo_8s.js";import{C as y}from"./clock-C0rErjOu.js";import{T as v}from"./triangle-alert-DAl9gRpV.js";import"./createLucideIcon-DzImHIgp.js";const P=()=>{const{orders:m,updateOrderStatus:g}=j(),[r,i]=o.useState("active"),[d,l]=o.useState(null),u=["Placed","Confirmed","Preparing","Rider Assigned","Out for Delivery"],h=["Delivered","Cancelled"],c=m.filter(s=>r==="active"?u.includes(s.status):h.includes(s.status)),n=(s,t)=>{g(s,t),x.success(`Order updated to ${t}`)},p=(s,t)=>{x.success(`Customer notified: Order delayed by ${t} mins`),l(null)},b=s=>{switch(s.status){case"Placed":return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>n(s.id,"Confirmed"),children:"Accept"}),e.jsx(a,{size:"sm",variant:"outline",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>n(s.id,"Cancelled"),children:"Reject"})]});case"Confirmed":return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{size:"sm",onClick:()=>n(s.id,"Preparing"),children:"Start Preparing"}),e.jsx(a,{size:"sm",variant:"outline",className:"text-orange-600 border-orange-200 bg-orange-50",onClick:()=>l(s.id),children:"Delay"})]});case"Preparing":return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{size:"sm",onClick:()=>n(s.id,"Rider Assigned"),children:"Ready for Pickup"}),e.jsx(a,{size:"sm",variant:"outline",className:"text-orange-600 border-orange-200 bg-orange-50",onClick:()=>l(s.id),children:"Delay"})]});case"Rider Assigned":return e.jsx(a,{size:"sm",disabled:!0,className:"opacity-50 cursor-not-allowed",children:"Waiting for Rider"});default:return null}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),e.jsxs("div",{className:"bg-white rounded-lg p-1 border border-gray-200 flex",children:[e.jsx("button",{onClick:()=>i("active"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="active"?"bg-brand-100 text-brand-700":"text-gray-500 hover:text-gray-900"}`,children:"Active"}),e.jsx("button",{onClick:()=>i("completed"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="completed"?"bg-brand-100 text-brand-700":"text-gray-500 hover:text-gray-900"}`,children:"Completed"})]})]}),e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-gray-200 text-gray-400",children:["No ",r," orders found."]}):c.map(s=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-mono text-lg font-bold text-gray-900",children:["#",s.id.split("-")[1]]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wider ${s.status==="Placed"?"bg-blue-100 text-blue-700":s.status==="Preparing"?"bg-orange-100 text-orange-700":s.status==="Delivered"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.status}),e.jsxs("span",{className:"text-gray-400 text-sm flex items-center gap-1",children:[e.jsx(y,{size:14})," ",s.date]})]}),e.jsx("div",{className:"space-y-1 pl-4 border-l-2 border-gray-100 mt-4",children:s.items.map((t,f)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-700",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:[t.quantity,"x"]})," ",t.title]}),e.jsxs("span",{className:"text-gray-500",children:["$",(t.price*t.quantity).toFixed(2)]})]},f))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-50 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-900",children:"Total"}),e.jsxs("span",{className:"font-bold text-xl text-brand-600",children:["$",s.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"w-full md:w-64 flex flex-col justify-center gap-3 border-t md:border-t-0 md:border-l border-gray-100 md:pl-6 pt-4 md:pt-0",children:[e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Customer"}),e.jsx("p",{children:"Mahros AL-Qabasy"}),e.jsx("p",{children:"+20 1015888272"})]}),b(s)]})]})},s.id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full text-orange-600",children:e.jsx(v,{size:24})}),e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Delay Order"})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Running late? Select a time to notify the customer. This will update their tracking status."}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[5,10,15,30].map(s=>e.jsxs("button",{onClick:()=>p(d,s),className:"py-3 border border-gray-200 rounded-xl hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700 font-medium transition-colors",children:["+",s," mins"]},s))}),e.jsx(a,{variant:"ghost",className:"w-full",onClick:()=>l(null),children:"Cancel"})]})})]})};export{P as default};
