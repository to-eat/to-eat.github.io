import{w as z,u as I,m as P,h as n,v as h,j as e}from"./index-VfP6m85b.js";import{B as T}from"./Button-Bb7kNBPQ.js";import{A as $}from"./arrow-left-BUmXsksh.js";import{A}from"./award-CSqCHGeg.js";import{P as R,a as S,R as E,C as F}from"./rotate-ccw-Dn9cKbGf.js";import{C as L}from"./chevron-left-B6psYVYE.js";import{C as B}from"./chevron-right-BNFwQK5_.js";import"./createLucideIcon-DFmN-LuL.js";const Q=()=>{const{orderId:g,itemId:b}=z(),m=I(),{mealKits:j}=P(),[r,f]=n.useState(0),[i,c]=n.useState(!1),[x,d]=n.useState(0),l=n.useRef(null),a=j.find(t=>t.id===b),o=(a==null?void 0:a.steps)||[],s=o[r];if(n.useEffect(()=>{c(!1),l.current&&clearInterval(l.current),s!=null&&s.duration?d(s.duration):d(0)},[s]),n.useEffect(()=>(i&&x>0?l.current=setInterval(()=>{d(t=>t<=1?(clearInterval(l.current),c(!1),h.success("Timer Finished!"),0):t-1)},1e3):l.current&&clearInterval(l.current),()=>{l.current&&clearInterval(l.current)}),[i,x]),!a)return e.jsx("div",{children:"Recipe not found"});const p=()=>{r<o.length-1?f(t=>t+1):(h.success("Bon AppÃ©tit! Meal prepared successfully."),m(`/tracking/${g}`))},v=()=>{r>0&&f(t=>t-1)},y=()=>c(!i),w=()=>{c(!1),d(s.duration||0)},N=t=>{const C=Math.floor(t/60),u=t%60;return`${C}:${u<10?"0":""}${u}`},k=(r+1)/o.length*100;return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center bg-gray-800 border-b border-gray-700",children:[e.jsx("button",{onClick:()=>m(-1),className:"text-gray-400 hover:text-white",children:e.jsx($,{size:24})}),e.jsxs("div",{className:"flex-1 px-6",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1 font-bold tracking-wider",children:[e.jsxs("span",{children:["STEP ",r+1," OF ",o.length]}),e.jsx("span",{children:a.title})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-brand-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}),e.jsx("div",{className:"w-6"})," "]}),e.jsx("div",{className:"flex-1 flex flex-col md:flex-row h-full overflow-hidden",children:e.jsxs("div",{className:"flex-1 p-8 flex flex-col justify-center items-center relative overflow-y-auto",children:[a.image&&e.jsx("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center pointer-events-none",style:{backgroundImage:`url(${a.image})`}}),e.jsxs("div",{className:"max-w-2xl w-full z-10 space-y-8",children:[e.jsx("div",{className:"bg-gray-800/80 backdrop-blur-md p-8 rounded-3xl border border-gray-700 shadow-2xl",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-500 rounded-full flex items-center justify-center text-2xl font-bold shrink-0 shadow-lg shadow-brand-500/30",children:s.order}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl md:text-4xl font-serif font-bold leading-tight mb-6",children:s.instruction}),s.tip&&e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 flex gap-3 text-blue-200 text-sm",children:[e.jsx(A,{size:20,className:"shrink-0 text-blue-400"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-blue-400",children:"Pro Tip:"})," ",s.tip]})]})]})]})}),s.duration&&e.jsxs("div",{className:"bg-gray-800/80 backdrop-blur-md p-6 rounded-3xl border border-gray-700 flex flex-col items-center",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-white mb-6 tabular-nums tracking-widest",children:N(x)}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:y,className:`w-16 h-16 rounded-full flex items-center justify-center transition-all ${i?"bg-yellow-500 hover:bg-yellow-600 text-gray-900":"bg-green-500 hover:bg-green-600 text-white"}`,children:i?e.jsx(R,{size:28}):e.jsx(S,{size:28,className:"ml-1"})}),e.jsx("button",{onClick:w,className:"w-16 h-16 rounded-full bg-gray-700 hover:bg-gray-600 flex items-center justify-center text-white transition-all",children:e.jsx(E,{size:24})})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-4 font-bold uppercase tracking-wider",children:"Timer"})]})]})]})}),e.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-between items-center",children:[e.jsxs("button",{onClick:v,disabled:r===0,className:`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all ${r===0?"text-gray-600 cursor-not-allowed":"text-white hover:bg-gray-700"}`,children:[e.jsx(L,{size:20})," Previous"]}),e.jsx(T,{size:"lg",onClick:p,className:"px-8 py-4 text-lg bg-white text-brand-900 hover:bg-gray-100 flex items-center gap-2",children:r===o.length-1?e.jsxs(e.Fragment,{children:["Finish Cooking ",e.jsx(F,{size:20})]}):e.jsxs(e.Fragment,{children:["Next Step ",e.jsx(B,{size:20})]})})]})]})};export{Q as default};
