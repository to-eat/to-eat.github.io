import{h as m,u as y,m as v,j as e,q as S,x as M}from"./index-C4Bhj8Yd.js";import{B as I}from"./Button-Ba6Qo_8s.js";import{S as b}from"./search-BdgAM8L-.js";import{c as j}from"./createLucideIcon-DzImHIgp.js";import{X as R}from"./x-BKaP5agP.js";import{S as N}from"./shopping-bag-8vcxqj9-.js";import{C as f}from"./chevron-right-CAW2906d.js";import{U}from"./utensils-CiJvdMyj.js";import{U as $}from"./user-BxgYsqv1.js";import{B}from"./bell-B68-w34E.js";import{M as E}from"./message-square-Dci10IDA.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=j("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=j("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),O=({isOpen:d,onClose:a})=>{const[l,r]=m.useState(""),[n,x]=m.useState(!1),g=y(),{mealKits:h,restaurants:c,chefs:i}=v();m.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[d]);const t=m.useMemo(()=>{if(!l.trim())return{meals:[],restaurants:[],chefs:[]};const s=l.toLowerCase(),k=h.filter(o=>o.title.toLowerCase().includes(s)||o.description.toLowerCase().includes(s)||o.tags.some(p=>p.toLowerCase().includes(s))).slice(0,3),z=c.filter(o=>o.name.toLowerCase().includes(s)||o.cuisine.some(p=>p.toLowerCase().includes(s))).slice(0,3),L=i.filter(o=>o.name.toLowerCase().includes(s)||o.specialty.toLowerCase().includes(s)).slice(0,3);return{meals:k,restaurants:z,chefs:L}},[l,h,c,i]),u=s=>{g(s),a()},C=()=>{n||(x(!0),r(""),setTimeout(()=>{r("Chicken"),x(!1)},1500))};if(!d)return null;const w=t.meals.length>0||t.restaurants.length>0||t.chefs.length>0;return e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-start justify-center pt-24 px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden relative z-10 animate-in fade-in zoom-in-95 duration-200 flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-gray-100",children:[e.jsx(b,{className:"text-gray-400",size:24}),e.jsx("input",{type:"text",placeholder:n?"Listening...":"Search for meals, restaurants, or chefs...",className:"flex-1 text-lg outline-none placeholder:text-gray-400 text-gray-900 bg-transparent",value:l,onChange:s=>r(s.target.value),autoFocus:!0,disabled:n}),e.jsx("button",{onClick:C,className:`p-2 rounded-full transition-all ${n?"bg-red-100 text-red-500 animate-pulse":"hover:bg-gray-100 text-gray-500"}`,title:"Voice Search",children:n?e.jsx(F,{size:20,className:"animate-spin"}):e.jsx(D,{size:20})}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:e.jsx(R,{size:20})})]}),e.jsxs("div",{className:"overflow-y-auto p-2",children:[!l&&e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx(b,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Type or use voice to start searching..."})]}),l&&!w&&!n&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsxs("p",{children:['No results found for "',l,'"']})}),t.meals.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-4 py-2 flex items-center gap-2",children:[e.jsx(N,{size:14})," Meals"]}),t.meals.map(s=>e.jsxs("div",{onClick:()=>u(`/product/${s.id}`),className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl cursor-pointer group transition-colors mx-2",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-12 h-12 rounded-lg object-cover bg-gray-100"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm group-hover:text-brand-600",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:s.description})]}),e.jsx(f,{size:16,className:"text-gray-300 group-hover:text-brand-500"})]},s.id))]}),t.restaurants.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-4 py-2 flex items-center gap-2",children:[e.jsx(U,{size:14})," Restaurants"]}),t.restaurants.map(s=>e.jsxs("div",{onClick:()=>u(`/restaurant/${s.id}`),className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl cursor-pointer group transition-colors mx-2",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-lg object-cover bg-gray-100"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm group-hover:text-brand-600",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.cuisine.join(", ")})]}),e.jsx(f,{size:16,className:"text-gray-300 group-hover:text-brand-500"})]},s.id))]}),t.chefs.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-4 py-2 flex items-center gap-2",children:[e.jsx($,{size:14})," Chefs"]}),t.chefs.map(s=>e.jsxs("div",{onClick:()=>u(`/chef/${s.id}`),className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl cursor-pointer group transition-colors mx-2",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-12 h-12 rounded-full object-cover bg-gray-100 border border-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm group-hover:text-brand-600",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.specialty})]}),e.jsx(f,{size:16,className:"text-gray-300 group-hover:text-brand-500"})]},s.id))]})]}),e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-xs text-gray-500 text-center",children:["Press ",e.jsx("kbd",{className:"font-mono bg-white px-1.5 py-0.5 rounded border border-gray-200 text-gray-700",children:"ESC"})," to close"]})]})]})},W=()=>{const{getCartCount:d,user:a}=S(),{notifications:l}=v(),r=y(),n=M(),x=d(),[g,h]=m.useState(!1),c=a?l.filter(t=>!t.read&&(t.targetUserId===a.id||t.targetRole&&t.targetRole===a.role||!t.targetUserId&&!t.targetRole)).length:0,i=t=>`text-sm font-medium transition-colors ${n.pathname===t?"text-brand-600 font-semibold":"text-gray-500 hover:text-gray-900"}`;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"sticky top-0 z-50 w-full bg-white border-b border-gray-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),r("/feed")},className:"flex-shrink-0 flex items-center cursor-pointer",children:e.jsx("span",{className:"font-serif text-2xl font-bold text-brand-500",children:"To-Eat"})}),e.jsxs("div",{className:"hidden md:flex space-x-6",children:[e.jsx("button",{onClick:()=>r("/feed"),className:i("/feed"),children:"Feed"}),e.jsx("button",{onClick:()=>r("/discover"),className:i("/discover"),children:"Discover"}),e.jsx("button",{onClick:()=>r("/offers"),className:i("/offers"),children:"Offers"}),e.jsx("button",{onClick:()=>r("/chefs"),className:i("/chefs"),children:"Chefs"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>h(!0),className:"text-gray-400 hover:text-brand-600 transition-colors p-1",title:"Search",children:e.jsx(b,{size:20})}),e.jsx("div",{className:"h-6 w-px bg-gray-200 hidden md:block"}),a?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>r("/notifications"),className:`text-gray-400 hover:text-gray-600 relative transition-colors ${n.pathname==="/notifications"?"text-brand-500":""}`,children:[e.jsx(B,{size:20}),c>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white border-2 border-white",children:c>9?"9+":c})]}),e.jsx("button",{onClick:()=>r("/support"),className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{size:20})})]}):null,e.jsxs("button",{onClick:()=>r("/checkout"),className:"text-gray-400 hover:text-brand-600 relative transition-colors",children:[e.jsx(N,{size:20}),x>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-brand-500 text-[10px] font-bold text-white",children:x})]}),a?e.jsx("button",{onClick:()=>r("/profile"),className:"h-8 w-8 rounded-full bg-gray-200 overflow-hidden border border-gray-200 hover:ring-2 hover:ring-brand-500 transition-all ml-2",children:e.jsx("img",{src:a.avatar,alt:"User",className:"h-full w-full object-cover"})}):e.jsxs(I,{size:"sm",onClick:()=>r("/login"),className:"!px-4 flex items-center gap-2 ml-2",children:[e.jsx(q,{size:16}),"Sign In"]})]})]})})}),e.jsx(O,{isOpen:g,onClose:()=>h(!1)})]})};export{F as L,D as M,W as N,q as a};
