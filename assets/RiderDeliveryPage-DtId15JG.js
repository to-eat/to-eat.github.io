import{u as v,w as j,m as N,h as i,j as e,v as n}from"./index-VfP6m85b.js";import{B as y}from"./Button-Bb7kNBPQ.js";import{C as w}from"./ChatModal-VnosxAVO.js";import{N as k}from"./navigation-BGzE33tI.js";import{C}from"./chevron-left-B6psYVYE.js";import{M as z}from"./map-pin-D0ZZYAaa.js";import{M as D}from"./message-square-Co5pN3cg.js";import{P as O}from"./phone-B0KevnUG.js";import"./bike-C2pB_j3D.js";import"./createLucideIcon-DFmN-LuL.js";import"./user-CkJPpAez.js";import"./x-CjeeDpu0.js";import"./send-7p_JSYif.js";const L=()=>{var m;const c=v(),{id:f}=j(),{orders:p,updateOrderStatus:o}=N(),[x,u]=i.useState(!1),s=p.find(a=>a.id===f),[t,l]=i.useState("pickup"),[d,r]=i.useState("assigned");if(i.useEffect(()=>{s&&(s.status==="Out for Delivery"||s.status==="Picked Up"?(l("dropoff"),r("arriving_dropoff")):s.status==="Delivered"&&r("delivered"))},[s]),!s)return e.jsx("div",{className:"p-8 text-center",children:"Order not found"});const g=()=>{t==="pickup"&&d==="assigned"?(r("arrived_pickup"),n.success("Marked as Arrived at Restaurant")):t==="pickup"&&d==="arrived_pickup"?(o(s.id,"Picked Up"),setTimeout(()=>{o(s.id,"Out for Delivery")},1e3),l("dropoff"),r("arriving_dropoff"),n.success("Order Picked Up")):t==="dropoff"&&(o(s.id,"Delivered"),r("delivered"),n.success("Order Delivered!"),setTimeout(()=>c("/rider/dashboard"),1500))},h=()=>t==="pickup"?d==="assigned"?"Arrived at Restaurant":"Confirm Pickup":"Confirm Delivery";return e.jsxs("div",{className:"flex flex-col h-full absolute inset-0 bg-white",children:[e.jsxs("div",{className:"flex-1 bg-gray-100 relative min-h-[50%]",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-full animate-ping absolute inset-0"}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-full shadow-lg flex items-center justify-center z-10 relative",children:e.jsx(k,{size:32,className:"text-brand-600 fill-brand-600"})})]})}),e.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:e.jsx("path",{d:"M100,100 Q200,300 300,500",stroke:"#3b82f6",strokeWidth:"4",fill:"none",strokeDasharray:"10,5"})}),e.jsx("button",{onClick:()=>c("/rider/dashboard"),className:"absolute top-4 left-4 bg-white p-3 rounded-full shadow-lg z-20 hover:bg-gray-50",children:e.jsx(C,{size:24})}),e.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur px-4 py-2 rounded-full shadow-lg z-20 text-sm font-bold text-gray-800",children:"Est. 12 mins"})]}),e.jsxs("div",{className:"bg-white rounded-t-3xl shadow-[0_-5px_30px_rgba(0,0,0,0.1)] p-6 relative z-20 animate-in slide-in-from-bottom-10",children:[e.jsx("div",{className:"w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 mb-1",children:t==="pickup"?`Pick up at ${((m=s.items[0])==null?void 0:m.restaurantName)||"Restaurant"}`:`Drop off to ${s.customerName}`}),e.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[e.jsx(z,{size:14}),t==="pickup"?"Downtown, Cairo":s.deliveryAddress||"Customer Address"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(!0),className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-colors",children:e.jsx(D,{size:20})}),e.jsx("button",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-green-600 hover:bg-green-200 transition-colors",children:e.jsx(O,{size:20})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 border border-gray-100",children:[e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Order Items"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.items.map((a,b)=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"font-bold text-xs bg-white px-2 py-1 border border-gray-200 rounded text-brand-600",children:[a.quantity,"x"]}),e.jsx("span",{className:"text-sm text-gray-800 font-medium",children:a.title})]})},b))})]}),e.jsx(y,{size:"lg",className:`w-full py-4 text-lg font-bold shadow-xl shadow-brand-500/20 transition-all ${t==="dropoff"?"bg-green-600 hover:bg-green-700 shadow-green-600/20":""}`,onClick:g,children:h()})]}),e.jsx(w,{isOpen:x,onClose:()=>u(!1),orderId:s.id,recipientName:s.customerName,recipientRole:"user"})]})};export{L as default};
