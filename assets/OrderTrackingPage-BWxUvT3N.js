import{h as f,m as w,q as k,j as e,v as R,w as S,u as z}from"./index-C4Bhj8Yd.js";import{N as v,L as D}from"./Navbar-BOC0zFRs.js";import{B as i}from"./Button-Ba6Qo_8s.js";import{X as O}from"./x-BKaP5agP.js";import{S as C}from"./star-G9yrjhzJ.js";import{C as I}from"./ChatModal-Ce4V34py.js";import{C as P}from"./clock-C0rErjOu.js";import{C as N}from"./circle-check-Bo9AdVTo.js";import{C as y}from"./chef-hat-CHIDsiTw.js";import{B as M}from"./bike-BMjQcjh8.js";import{M as H}from"./map-pin-HN--pi6j.js";import{H as $}from"./house-NBufnF_5.js";import{U as A}from"./utensils-CiJvdMyj.js";import{M as B}from"./message-square-Dci10IDA.js";import{P as L}from"./phone-3j9QllH7.js";import{T as U}from"./thumbs-up-Dk-uMUu3.js";import"./search-BdgAM8L-.js";import"./createLucideIcon-DzImHIgp.js";import"./shopping-bag-8vcxqj9-.js";import"./chevron-right-CAW2906d.js";import"./user-BxgYsqv1.js";import"./bell-B68-w34E.js";import"./send-yVNlsuoY.js";const q=({order:c,isOpen:r,onClose:l})=>{const[n,b]=f.useState(5),[o,g]=f.useState(""),{addReview:m}=w(),{user:s}=k();if(!r)return null;const d=t=>{if(t.preventDefault(),!s)return;const p={id:`rv-${Date.now()}`,targetId:c.restaurantId||"unknown",userId:s.id,userName:s.name,userAvatar:s.avatar,rating:n,date:"Just now",comment:o,helpfulCount:0};m(p),R.success("Review submitted successfully!"),l()};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:l}),e.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl relative z-10 animate-in zoom-in-95 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Rate your Order"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:e.jsx(O,{size:20})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"flex justify-center mb-6 gap-2",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>b(t),className:"transition-transform hover:scale-110 focus:outline-none",children:e.jsx(C,{size:32,fill:t<=n?"#FACC15":"none",className:t<=n?"text-yellow-400":"text-gray-300"})},t))}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Write a Review"}),e.jsx("textarea",{required:!0,value:o,onChange:t=>g(t.target.value),placeholder:"How was the food? How was the delivery?",className:"w-full p-4 rounded-xl border border-gray-200 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 outline-none text-sm min-h-[100px]"})]}),e.jsx(i,{type:"submit",size:"lg",className:"w-full",children:"Submit Review"})]})]})]})},ce=()=>{const{id:c}=S(),r=z(),{orders:l,mealKits:n}=w(),[b,o]=f.useState(!1),[g,m]=f.useState(!1),s=l.find(a=>a.id===c),d=(s==null?void 0:s.items.filter(a=>n.some(u=>u.id===a.id)))||[],t=[{status:"Placed",label:"Order Placed",icon:P,desc:"We have received your order."},{status:"Confirmed",label:"Confirmed",icon:N,desc:"Restaurant has accepted your order."},{status:"Preparing",label:"Preparing",icon:y,desc:"Chef is cooking your meal."},{status:"Rider Assigned",label:"Rider Assigned",icon:M,desc:"Mike is on the way to the restaurant."},{status:"Out for Delivery",label:"Out for Delivery",icon:H,desc:"Your food is on the way to you!"},{status:"Delivered",label:"Delivered",icon:$,desc:"Enjoy your meal!"}];if(!s)return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(v,{}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsx(D,{className:"animate-spin text-brand-500 mb-4",size:48}),e.jsx("h2",{className:"text-xl font-bold",children:"Loading Order..."}),e.jsx("p",{className:"text-gray-500",children:"If this takes too long, the order ID might be invalid."}),e.jsx(i,{className:"mt-4",onClick:()=>r("/feed"),children:"Return Home"})]})]});const p=a=>a==="Ready"?"Preparing":a==="Picked Up"?"Out for Delivery":a,x=t.findIndex(a=>a.status===p(s.status)),j=t[x]||t[0];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(v,{}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-500 uppercase tracking-wider font-bold mb-1",children:["Order #",c]}),e.jsx("h1",{className:"font-serif text-3xl font-bold text-gray-900 mb-2",children:s.status==="Delivered"?"Arrived!":`Status: ${s.status}`}),s.status!=="Delivered"&&s.status!=="Cancelled"&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-4 overflow-hidden",children:e.jsx("div",{className:"bg-brand-500 h-2 rounded-full transition-all duration-1000",style:{width:`${(x+1)/t.length*100}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-8",children:[e.jsxs("div",{className:"p-6 bg-brand-50 border-b border-brand-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-brand-600 shadow-sm animate-pulse",children:e.jsx(j.icon,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg text-brand-900",children:j.label}),e.jsx("p",{className:"text-brand-700 text-sm",children:j.desc})]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:t.map((a,u)=>{const h=u<=x;return e.jsxs("div",{className:"flex gap-4 relative",children:[u!==t.length-1&&e.jsx("div",{className:`absolute left-3.5 top-8 bottom-[-24px] w-0.5 ${h?"bg-brand-200":"bg-gray-100"}`}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 z-10 transition-colors ${h?"bg-brand-500 text-white":"bg-gray-100 text-gray-400"}`,children:h?e.jsx(N,{size:14}):e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})}),e.jsxs("div",{className:`${h?"opacity-100":"opacity-40"} transition-opacity`,children:[e.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:a.label}),e.jsx("p",{className:"text-xs text-gray-500",children:a.desc})]})]},a.status)})})})]}),s.status==="Delivered"&&d.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl shadow-lg p-6 mb-8 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(y,{size:20})," Ready to Cook?"]}),e.jsxs("p",{className:"text-orange-100 text-sm",children:["You have ",d.length," meal kit(s) waiting."]})]}),e.jsxs(i,{className:"bg-white text-orange-600 hover:bg-orange-50 border-none",onClick:()=>r(`/cook/${s.id}/${d[0].id}`),children:["Start Cooking ",e.jsx(A,{size:16,className:"ml-2"})]})]}),x>=3&&s.status!=="Delivered"&&e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8 animate-in slide-in-from-bottom-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 overflow-hidden",children:e.jsx("img",{src:"https://i.pravatar.cc/150?img=33",alt:"Rider",className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Mike R."}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(C,{size:12,className:"fill-yellow-400 text-yellow-400"})," 4.9 â€¢ Yamaha NMAX"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-brand-50 hover:text-brand-600 transition-colors",children:e.jsx(B,{size:18})}),e.jsx("button",{className:"w-10 h-10 rounded-full bg-brand-500 flex items-center justify-center text-white hover:bg-brand-600 transition-colors",children:e.jsx(L,{size:18})})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(i,{variant:"outline",className:"flex-1",onClick:()=>r("/feed"),children:"Back to Home"}),s.status==="Delivered"?e.jsxs(i,{className:"flex-1 gap-2",onClick:()=>o(!0),children:[e.jsx(U,{size:18})," Leave Review"]}):e.jsx(i,{className:"flex-1",onClick:()=>r("/support"),children:"Need Help?"})]})]}),e.jsx(q,{isOpen:b,onClose:()=>o(!1),order:s}),e.jsx(I,{isOpen:g,onClose:()=>m(!1),orderId:s.id,recipientName:"Mike R.",recipientRole:"rider"})]})};export{ce as default};
